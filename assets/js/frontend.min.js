(()=>{var s={cookies:{get:function(e){e=("; "+document.cookie).split("; "+e+"=");return 2===e.length?e.pop().split(";").shift():null},set:function(e,t,n){var o,i="";n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),i="; expires="+o.toUTCString()),document.cookie=e+"="+(t||"")+i+"; path=/"},getClosedAds:function(){var e=this.get("wbam_closed_ads");if(e)try{return JSON.parse(e)}catch(e){}return[]},markClosed:function(e){var t=this.getClosedAds();-1===t.indexOf(e)&&t.push(e),this.set("wbam_closed_ads",JSON.stringify(t),1)},isClosed:function(e){return-1!==this.getClosedAds().indexOf(e)}},sticky:{init:function(){document.querySelectorAll(".wbam-sticky-ad").forEach(function(t){var e,n=parseInt(t.getAttribute("data-ad-id"),10);s.cookies.isClosed(n)?t.style.display="none":(e=t.querySelector(".wbam-sticky-close"))&&e.addEventListener("click",function(e){e.preventDefault(),t.style.display="none",s.cookies.markClosed(n)})})}},popup:{shown:[],init:function(){document.querySelectorAll(".wbam-popup-overlay").forEach(function(t){var n=parseInt(t.getAttribute("data-ad-id"),10),e=t.getAttribute("data-trigger"),o=parseInt(t.getAttribute("data-delay"),10)||5,i=parseInt(t.getAttribute("data-scroll"),10)||50;if(!s.cookies.isClosed(n)){var c=t.querySelector(".wbam-popup-close");switch(c&&c.addEventListener("click",function(e){e.preventDefault(),s.popup.close(t,n)}),t.addEventListener("click",function(e){e.target===t&&s.popup.close(t,n)}),document.addEventListener("keydown",function(e){"Escape"===e.key&&"none"!==t.style.display&&s.popup.close(t,n)}),e){case"delay":s.popup.setupDelayTrigger(t,n,o);break;case"scroll":s.popup.setupScrollTrigger(t,n,i);break;case"exit":s.popup.setupExitTrigger(t,n)}}})},show:function(e,t){-1===this.shown.indexOf(t)&&(this.shown.push(t),e.style.display="flex",document.body.style.overflow="hidden")},close:function(e,t){e.style.display="none",document.body.style.overflow="",s.cookies.markClosed(t)},setupDelayTrigger:function(e,t,n){var o=this;setTimeout(function(){o.show(e,t)},1e3*n)},setupScrollTrigger:function(n,o,i){function c(){var e,t;r||(e=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-window.innerHeight,i<=e/t*100&&(r=!0,s.show(n,o),window.removeEventListener("scroll",c)))}var s=this,r=!1;window.addEventListener("scroll",c)},setupExitTrigger:function(t,n){function o(e){c||e.clientY<=0&&(c=!0,i.show(t,n),document.removeEventListener("mouseout",o))}var i=this,c=!1;setTimeout(function(){document.addEventListener("mouseout",o)},2e3)}},lazy:{init:function(){var t,e=document.querySelectorAll(".wbam-lazy");"IntersectionObserver"in window?(t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&((e=e.target).classList.add("wbam-loaded"),t.unobserve(e))})},{rootMargin:"100px"}),e.forEach(function(e){t.observe(e)})):e.forEach(function(e){e.classList.add("wbam-loaded")})}},clicks:{init:function(){document.querySelectorAll(".wbam-ad-container[data-ad-id]").forEach(function(t){t.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){s.clicks.track(t)})})})},track:function(e){var t,n=e.getAttribute("data-ad-id"),e=e.getAttribute("data-placement")||"";n&&window.wbamFrontend&&((t=new XMLHttpRequest).open("POST",window.wbamFrontend.ajaxUrl,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("action=wbam_track_click&ad_id="+encodeURIComponent(n)+"&placement="+encodeURIComponent(e)+"&nonce="+encodeURIComponent(window.wbamFrontend.nonce)))}},init:function(){this.sticky.init(),this.popup.init(),this.lazy.init(),this.clicks.init()}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){s.init()}):s.init()})();