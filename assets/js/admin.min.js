(o=>{o(document).ready(function(){function n(t,e,a){var i=o("<textarea>");o("body").append(i),i.val(t).select();try{document.execCommand("copy"),e.html('<span class="dashicons dashicons-yes"></span>'),setTimeout(function(){e.html(a)},1500)}catch(e){alert("Copy failed. URL: "+t)}i.remove()}o(".wbam-adtype-tab").on("click",function(e){e.preventDefault();e=o(this).data("type");o("#wbam-adtype-"+e).prop("checked",!0),o(".wbam-adtype-tab").removeClass("wbam-adtype-tab-active"),o(this).addClass("wbam-adtype-tab-active"),o(".wbam-adtype-content").hide(),o('.wbam-adtype-content[data-type="'+e+'"]').show()}),o(document).on("click",".wbam-upload-image",function(e){e.preventDefault();var t=o(this).closest(".wbam-field"),a=t.find('input[type="url"]'),i=t.find(".wbam-image-preview"),n=wp.media({title:wbamAdmin.i18n.selectImage,button:{text:wbamAdmin.i18n.useImage},multiple:!1});n.on("select",function(){var e=n.state().get("selection").first().toJSON().url;a.val(e),i.html('<img src="'+e+'" alt="" />'),t.find(".wbam-remove-image").show()}),n.open()}),o(document).on("click",".wbam-remove-image",function(e){e.preventDefault();e=o(this).closest(".wbam-field");e.find('input[type="url"]').val(""),e.find(".wbam-image-preview").empty(),o(this).hide()}),o(document).on("change",'input[name="wbam_placements[]"]',function(){o(".wbam-paragraph-settings").toggle(o('input[value="after_paragraph"]').is(":checked")),o(".wbam-activity-settings").toggle(o('input[value="bp_activity"]').is(":checked")),o(".wbam-archive-settings").toggle(o('input[value="archive"]').is(":checked"))}),o(document).on("change",'input[name="wbam_display_rules[display_on]"]',function(){o(".wbam-conditional-section").removeClass("wbam-visible"),o('.wbam-conditional-section[data-show-when="'+o(this).val()+'"]').addClass("wbam-visible")}),o('input[name="wbam_display_rules[display_on]"]:checked').trigger("change"),o(".wbam-device-option").each(function(){o(this).toggleClass("wbam-selected",o(this).find("input").is(":checked"))}),o(document).on("change",".wbam-device-option input",function(){o(this).closest(".wbam-device-option").toggleClass("wbam-selected",o(this).is(":checked"))}),o(document).on("change",".wbam-geo-enable",function(){o(".wbam-geo-options").toggle(o(this).is(":checked"))}),"undefined"!=typeof wbamCodeEditor&&o("#wbam_code").length&&wp.codeEditor.initialize(o("#wbam_code"),wbamCodeEditor),o(document).on("click",".wbam-copy-btn, .wbam-copy-url",function(e){e.preventDefault();var t=o(this).data("clipboard")||o(this).data("url"),a=o(this),i=a.html();navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(function(){a.html('<span class="dashicons dashicons-yes"></span>'),setTimeout(function(){a.html(i)},1500)}).catch(function(){n(t,a,i)}):n(t,a,i)})})})(jQuery);