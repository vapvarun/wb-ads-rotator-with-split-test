(c=>{c(document).ready(function(){c(".wbam-adtype-tab").on("click",function(e){e.preventDefault();e=c(this).data("type");c("#wbam-adtype-"+e).prop("checked",!0),c(".wbam-adtype-tab").removeClass("wbam-adtype-tab-active"),c(this).addClass("wbam-adtype-tab-active"),c(".wbam-adtype-content").hide(),c('.wbam-adtype-content[data-type="'+e+'"]').show()});var n=null;function o(t,e,a){var i=c("<textarea>");c("body").append(i),i.val(t).select();try{document.execCommand("copy"),e.html('<span class="dashicons dashicons-yes"></span>'),setTimeout(function(){e.html(a)},1500)}catch(e){alert("Copy failed. URL: "+t)}i.remove()}c(document).on("click",".wbam-upload-image",function(e){var t,a,i;e.preventDefault(),"undefined"==typeof wp||void 0===wp.media?alert("Media library not loaded. Please refresh the page."):(e=c(this).closest(".wbam-field"),t=e.find('input[type="url"]').first(),a=e.find(".wbam-image-preview"),i=e.find(".wbam-remove-image"),n&&n.off("select"),(n=wp.media({title:"undefined"!=typeof wbamAdmin?wbamAdmin.i18n.selectImage:"Select Image",button:{text:"undefined"!=typeof wbamAdmin?wbamAdmin.i18n.useImage:"Use This Image"},library:{type:"image"},multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON().url;t.val(e).trigger("change"),a.html('<img src="'+e+'" alt="" />'),i.show()}),n.open())}),c(document).on("click",".wbam-remove-image",function(e){e.preventDefault();e=c(this).closest(".wbam-field");e.find('input[type="url"]').first().val("").trigger("change"),e.find(".wbam-image-preview").empty(),c(this).hide()}),c(document).on("input change","#wbam_image_url",function(){var e=c(this).val().trim(),t=c(this).closest(".wbam-field"),a=t.find(".wbam-image-preview"),t=t.find(".wbam-remove-image");e&&e.match(/\.(jpg|jpeg|png|gif|webp|svg)$/i)?(a.html('<img src="'+e+'" alt="" />'),t.show()):e||(a.empty(),t.hide())}),c(document).on("change",'input[name="wbam_placements[]"]',function(){c(".wbam-paragraph-settings").toggle(c('input[value="after_paragraph"]').is(":checked")),c(".wbam-activity-settings").toggle(c('input[value="bp_activity"]').is(":checked")),c(".wbam-archive-settings").toggle(c('input[value="archive"]').is(":checked"))}),c('input[name="wbam_placements[]"]').first().trigger("change"),c(document).on("change",'input[name="wbam_display_rules[display_on]"]',function(){c(".wbam-conditional-section").removeClass("wbam-visible"),c('.wbam-conditional-section[data-show-when="'+c(this).val()+'"]').addClass("wbam-visible")}),c('input[name="wbam_display_rules[display_on]"]:checked').trigger("change"),c(".wbam-device-option").each(function(){c(this).toggleClass("wbam-selected",c(this).find("input").is(":checked"))}),c(document).on("change",".wbam-device-option input",function(){c(this).closest(".wbam-device-option").toggleClass("wbam-selected",c(this).is(":checked"))}),c(document).on("change",".wbam-geo-enable",function(){c(".wbam-geo-options").toggle(c(this).is(":checked"))}),"undefined"!=typeof wbamCodeEditor&&c("#wbam_code").length&&wp.codeEditor.initialize(c("#wbam_code"),wbamCodeEditor),c(document).on("click",".wbam-copy-btn, .wbam-copy-url",function(e){e.preventDefault();var t=c(this).data("clipboard")||c(this).data("url"),a=c(this),i=a.html();navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(function(){a.html('<span class="dashicons dashicons-yes"></span>'),setTimeout(function(){a.html(i)},1500)}).catch(function(){o(t,a,i)}):o(t,a,i)})})})(jQuery);