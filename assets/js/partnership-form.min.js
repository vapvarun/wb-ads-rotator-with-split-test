(i=>{i(document).ready(function(){var e=i("#wbam-partnership-form"),r=e.find(".wbam-submit-btn"),t=e.find(".wbam-form-message"),a=i("#wbam-budget-fields"),s=r.text();function n(a,e){t.removeClass("wbam-success wbam-error").addClass("wbam-"+e).html(a).slideDown(),i("html, body").animate({scrollTop:t.offset().top-100},300)}i("#wbam_partnership_type").on("change",function(){"exchange"===i(this).val()?a.slideUp():a.slideDown()}).trigger("change"),e.on("submit",function(a){a.preventDefault(),t.removeClass("wbam-success wbam-error").hide(),(()=>{var a=i("#wbam_partner_name").val().trim(),e=i("#wbam_partner_email").val().trim(),r=i("#wbam_partner_website").val().trim();if(a&&e&&r)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){if(/^https?:\/\/.+/.test(r))return 1;n(wbamPartnership.i18n.invalidUrl,"error")}else n(wbamPartnership.i18n.invalidEmail,"error");else n(wbamPartnership.i18n.required,"error")})()&&(r.prop("disabled",!0).text(wbamPartnership.i18n.submitting),a={action:"wbam_submit_partnership",nonce:wbamPartnership.nonce,name:i("#wbam_partner_name").val(),email:i("#wbam_partner_email").val(),website_url:i("#wbam_partner_website").val(),partnership_type:i("#wbam_partnership_type").val(),target_post_id:i("#wbam_target_page").val()||"",anchor_text:i("#wbam_anchor_text").val(),budget_min:i("#wbam_budget_min").val(),budget_max:i("#wbam_budget_max").val(),message:i("#wbam_message").val()},i.ajax({url:wbamPartnership.ajaxUrl,type:"POST",data:a,success:function(a){a.success?(n(a.data.message,"success"),e[0].reset(),e.find(".wbam-form-row").not(".wbam-form-actions").slideUp()):n(a.data.message||wbamPartnership.i18n.error,"error")},error:function(){n(wbamPartnership.i18n.error,"error")},complete:function(){r.prop("disabled",!1).text(s)}}))})})})(jQuery);